<!DOCTYPE html>
<html lang="en">
<head>
	<title>Table V04</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<!--===============================================================================================-->
	<link rel="icon" type="image/png" href="images/icons/favicon.ico"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/perfect-scrollbar/perfect-scrollbar.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="css/util.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
<!--===============================================================================================-->
</head>
<body>





<input id="searchKeyword" type="text" value="" name="keyword" onkeyup="get_searched_data()"/>

	<div class="limiter">
		<div class="container-table100">
			<div class="wrap-table100">
				<div class="table100 ver1 m-b-110">
					<div class="table100-head">
						<table  id="myTable">
							<thead>

								<tr class="row100 head">
									<th class="cell100 column1">SC_CODE</th>
									<th class="cell100 column2">SC_NAME</th>
									<th class="cell100 column3">OPEN</th>
									<th class="cell100 column4">HIGH</th>
									<th class="cell100 column5">LOW</th>
									<th class="cell100 column5">CLOSE</th>
								</tr>
							</thead>
						</table>
					</div>
			</div>
		</div>
	</div>


<!--===============================================================================================-->
	<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/bootstrap/js/popper.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/select2/select2.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/perfect-scrollbar/perfect-scrollbar.min.js"></script>
	<script>
		$('.js-pscroll').each(function(){
			var ps = new PerfectScrollbar(this);

			$(window).on('resize', function(){
				ps.update();
			})
		});

		function get_searched_data() {
		  $("#myTable tr").remove();
		  $.post("/get_searched_data", {"keyword": $("input[name='keyword']").val()})
		   .done(function(response) {
		    $("#the-string").show();
		    var table = document.getElementById("myTable");
		    var response = JSON.parse(response);
		    var row = table.insertRow(0);
		    var cell1 = row.insertCell(0);
		    var cell2 = row.insertCell(1);
		    var cell3 = row.insertCell(2);
		    var cell4 = row.insertCell(3);
		    var cell5 = row.insertCell(4);
		    var cell6 = row.insertCell(5);
		    cell1.innerHTML = "SC_CODE"
		    cell2.innerHTML = "SC_NAME"
		    cell3.innerHTML = "OPEN"
		    cell4.innerHTML = "HIGH"
		    cell5.innerHTML = "LOW"
		    cell6.innerHTML = "CLOSE"
		    for( i=1; i < response.length; i++) {
		      var row = table.insertRow(i);
		      var cell1 = row.insertCell(0);
		      var cell2 = row.insertCell(1);
		      var cell3 = row.insertCell(2);
		      var cell4 = row.insertCell(3);
		      var cell5 = row.insertCell(4);
		      var cell6 = row.insertCell(5);
		      cell1.innerHTML = response[i]['SC_CODE'];
		      cell2.innerHTML = response[i]['SC_NAME'];
		      cell3.innerHTML = response[i]['OPEN'];
		      cell4.innerHTML = response[i]['HIGH'];
		      cell5.innerHTML = response[i]['LOW'];
		      cell6.innerHTML = response[i]['CLOSE'];
		    }
		  });
		}

		function getData() {
		  $.get("/getTopTenRecordFromRedis")
		   .done(function(response) {
		    $("#the-string").show();
		    var table = document.getElementById("myTable");
		    // $("#myTable tr").remove();
		    var response = JSON.parse(response);
			  console.log(response);
		    for( i=1; i < response.length; i++) {
		      var row = table.insertRow(i);
		      var cell1 = row.insertCell(0);
		      var cell2 = row.insertCell(1);
		      var cell3 = row.insertCell(2);
		      var cell4 = row.insertCell(3);
		      var cell5 = row.insertCell(4);
		      var cell6 = row.insertCell(5);
		      cell1.innerHTML = response[i]['SC_CODE'];
		      cell2.innerHTML = response[i]['SC_NAME'];
		      cell3.innerHTML = response[i]['OPEN'];
		      cell4.innerHTML = response[i]['HIGH'];
		      cell5.innerHTML = response[i]['LOW'];
		      cell6.innerHTML = response[i]['CLOSE'];
		    }
		  });
		}


		$(document).ready(function() {
		getData();
		alert('')
		});


	</script>
<!--===============================================================================================-->
	<script src="js/main.js"></script>

</body>
</html>
